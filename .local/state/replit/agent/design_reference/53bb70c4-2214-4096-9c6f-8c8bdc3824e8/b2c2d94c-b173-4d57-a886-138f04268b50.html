<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartAttend - AI Face Recognition Attendance System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        danger: '#EF4444'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-slate-50 font-sans">
    <!-- @COMPONENT: NavigationSidebar -->
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="w-64 bg-white shadow-lg border-r border-gray-200">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
                        <i class="fas fa-user-check text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-900">SmartAttend</h1>
                        <p class="text-sm text-gray-500">AI Recognition</p>
                    </div>
                </div>
            </div>
            
            <nav class="mt-6">
                <div class="px-4 space-y-2">
                    <a href="#" class="flex items-center px-4 py-3 text-gray-700 bg-primary/10 text-primary rounded-lg">
                        <i class="fas fa-chart-line w-5 h-5 mr-3"></i>
                        Dashboard
                    </a>
                    <a href="#" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg">
                        <i class="fas fa-camera w-5 h-5 mr-3"></i>
                        Live Attendance
                    </a>
                    <a href="#" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg">
                        <i class="fas fa-users w-5 h-5 mr-3"></i>
                        Students
                    </a>
                    <a href="#" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg">
                        <i class="fas fa-chalkboard w-5 h-5 mr-3"></i>
                        Classes
                    </a>
                    <a href="#" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg">
                        <i class="fas fa-brain w-5 h-5 mr-3"></i>
                        Training
                    </a>
                    <a href="#" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg">
                        <i class="fas fa-chart-bar w-5 h-5 mr-3"></i>
                        Reports
                    </a>
                </div>
                
                <div class="mt-8 px-4">
                    <div class="border-t border-gray-200 pt-4">
                        <a href="#" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg">
                            <i class="fas fa-cog w-5 h-5 mr-3"></i>
                            Settings
                        </a>
                        <a href="#" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg">
                            <i class="fas fa-sign-out-alt w-5 h-5 mr-3"></i>
                            Logout
                        </a>
                    </div>
                </div>
            </nav>
        </div>
        <!-- @END_COMPONENT: NavigationSidebar -->

        <!-- Main Content -->
        <div class="flex-1 overflow-hidden">
            <!-- @COMPONENT: TopHeader -->
            <header class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-semibold text-gray-900">Dashboard</h2>
                        <p class="text-gray-600">Monitor attendance and manage your classes</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors">
                            <i class="fas fa-camera mr-2"></i>
                            Start Attendance
                        </button>
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-gray-600"></i>
                            </div>
                            <span class="text-gray-700 font-medium" data-bind="user.name">Prof. Johnson</span>
                        </div>
                    </div>
                </div>
            </header>
            <!-- @END_COMPONENT: TopHeader -->

            <!-- @COMPONENT: DashboardMain -->
            <main class="flex-1 overflow-y-auto p-6">
                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm font-medium">Total Students</p>
                                <p class="text-3xl font-bold text-gray-900" data-bind="stats.totalStudents">342</p>
                            </div>
                            <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                                <i class="fas fa-users text-primary text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center">
                            <span class="text-secondary text-sm font-medium">↗ 12% from last month</span>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm font-medium">Today's Attendance</p>
                                <p class="text-3xl font-bold text-gray-900" data-bind="stats.todayAttendance">89%</p>
                            </div>
                            <div class="w-12 h-12 bg-secondary/10 rounded-lg flex items-center justify-center">
                                <i class="fas fa-chart-line text-secondary text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center">
                            <span class="text-secondary text-sm font-medium">↗ 3% from yesterday</span>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm font-medium">Active Classes</p>
                                <p class="text-3xl font-bold text-gray-900" data-bind="stats.activeClasses">8</p>
                            </div>
                            <div class="w-12 h-12 bg-accent/10 rounded-lg flex items-center justify-center">
                                <i class="fas fa-chalkboard text-accent text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center">
                            <span class="text-gray-500 text-sm font-medium">2 classes today</span>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm font-medium">Recognition Accuracy</p>
                                <p class="text-3xl font-bold text-gray-900" data-bind="stats.accuracy">96.2%</p>
                            </div>
                            <div class="w-12 h-12 bg-danger/10 rounded-lg flex items-center justify-center">
                                <i class="fas fa-brain text-danger text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center">
                            <span class="text-secondary text-sm font-medium">↗ 0.8% improvement</span>
                        </div>
                    </div>
                </div>

                <!-- Main Content Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Live Attendance Section -->
                    <div class="lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200">
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-semibold text-gray-900">Live Attendance Capture</h3>
                                <span class="bg-secondary/10 text-secondary px-3 py-1 rounded-full text-sm font-medium">Ready</span>
                            </div>
                        </div>
                        <div class="p-6">
                            <!-- @COMPONENT: WebcamCapture -->
                            <div class="bg-gray-900 rounded-lg overflow-hidden mb-6">
                                <div class="aspect-video bg-gray-800 flex items-center justify-center">
                                    <div class="text-center text-white">
                                        <i class="fas fa-camera text-4xl mb-3 text-gray-400"></i>
                                        <p class="text-lg font-medium">Camera Preview</p>
                                        <p class="text-sm text-gray-400">Click "Start Capture" to begin</p>
                                    </div>
                                </div>
                                <!-- Camera controls overlay -->
                                <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-4">
                                    <button class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary/90 transition-colors" data-event="click:startCapture">
                                        <i class="fas fa-play mr-2"></i>Start Capture
                                    </button>
                                    <button class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors" data-event="click:stopCapture">
                                        <i class="fas fa-stop mr-2"></i>Stop
                                    </button>
                                </div>
                            </div>
                            <!-- @END_COMPONENT: WebcamCapture -->

                            <!-- Capture Settings -->
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Capture Interval</label>
                                    <select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary focus:border-transparent">
                                        <option>2 seconds</option>
                                        <option>3 seconds</option>
                                        <option>5 seconds</option>
                                        <option>Manual</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Total Images</label>
                                    <input type="number" value="20" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary focus:border-transparent">
                                </div>
                            </div>

                            <!-- Progress Bar -->
                            <div class="mb-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium text-gray-700">Capture Progress</span>
                                    <span class="text-sm text-gray-500" data-bind="progress.current">0/20</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-primary h-2 rounded-full transition-all duration-300" style="width: 0%" data-bind="progress.percentage"></div>
                                </div>
                            </div>

                            <!-- Quick Actions -->
                            <div class="flex space-x-3">
                                <button class="flex-1 bg-secondary text-white py-3 rounded-lg hover:bg-secondary/90 transition-colors">
                                    <i class="fas fa-bolt mr-2"></i>Quick Attendance
                                </button>
                                <button class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors">
                                    <i class="fas fa-cog mr-2"></i>Advanced Settings
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity & Classes -->
                    <div class="space-y-6">
                        <!-- Today's Classes -->
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200">
                            <div class="p-6 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-900">Today's Classes</h3>
                            </div>
                            <div class="p-6 space-y-4">
                                <!-- @MAP: todayClasses.map(class => ( -->
                                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                    <div>
                                        <p class="font-medium text-gray-900" data-bind="class.name">CS 101 - Intro to Programming</p>
                                        <p class="text-sm text-gray-600" data-bind="class.time">9:00 AM - 10:30 AM</p>
                                    </div>
                                    <div class="text-right">
                                        <span class="bg-secondary/10 text-secondary px-2 py-1 rounded text-sm" data-bind="class.attendance">28/30</span>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                    <div>
                                        <p class="font-medium text-gray-900">CS 201 - Data Structures</p>
                                        <p class="text-sm text-gray-600">2:00 PM - 3:30 PM</p>
                                    </div>
                                    <div class="text-right">
                                        <span class="bg-accent/10 text-accent px-2 py-1 rounded text-sm">Upcoming</span>
                                    </div>
                                </div>
                                <!-- @END_MAP )) -->
                            </div>
                        </div>

                        <!-- Recent Recognition Results -->
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200">
                            <div class="p-6 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-900">Recent Recognition</h3>
                            </div>
                            <div class="p-6">
                                <!-- @MAP: recentRecognitions.map(recognition => ( -->
                                <div class="flex items-center space-x-3 mb-4 last:mb-0">
                                    <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
                                        <i class="fas fa-user text-gray-600"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-gray-900" data-bind="recognition.studentName">John Smith</p>
                                        <p class="text-sm text-gray-600" data-bind="recognition.confidence">Confidence: 96.2%</p>
                                    </div>
                                    <div class="text-right">
                                        <span class="text-xs text-gray-500" data-bind="recognition.timestamp">2 min ago</span>
                                    </div>
                                </div>
                                
                                <div class="flex items-center space-x-3 mb-4">
                                    <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
                                        <i class="fas fa-user text-gray-600"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-gray-900">Emily Davis</p>
                                        <p class="text-sm text-gray-600">Confidence: 94.8%</p>
                                    </div>
                                    <div class="text-right">
                                        <span class="text-xs text-gray-500">5 min ago</span>
                                    </div>
                                </div>
                                
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
                                        <i class="fas fa-user text-gray-600"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-gray-900">Michael Johnson</p>
                                        <p class="text-sm text-gray-600">Confidence: 91.3%</p>
                                    </div>
                                    <div class="text-right">
                                        <span class="text-xs text-gray-500">8 min ago</span>
                                    </div>
                                </div>
                                <!-- @END_MAP )) -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Reports -->
                <div class="mt-8 bg-white rounded-xl shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg font-semibold text-gray-900">Attendance Reports</h3>
                            <button class="text-primary hover:text-primary/80 font-medium">View All</button>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Class</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Present</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Absent</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Accuracy</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <!-- @MAP: reports.map(report => ( -->
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm font-medium text-gray-900" data-bind="report.className">CS 101 - Intro to Programming</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600" data-bind="report.date">2024-01-15</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" data-bind="report.present">28</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" data-bind="report.absent">2</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="bg-secondary/10 text-secondary px-2 py-1 rounded text-sm" data-bind="report.accuracy">96.2%</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-primary hover:text-primary/80 mr-3">View</button>
                                        <button class="text-gray-600 hover:text-gray-800">Export</button>
                                    </td>
                                </tr>
                                
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm font-medium text-gray-900">CS 201 - Data Structures</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">2024-01-14</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">3</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="bg-secondary/10 text-secondary px-2 py-1 rounded text-sm">94.8%</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-primary hover:text-primary/80 mr-3">View</button>
                                        <button class="text-gray-600 hover:text-gray-800">Export</button>
                                    </td>
                                </tr>
                                <!-- @END_MAP )) -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </main>
            <!-- @END_COMPONENT: DashboardMain -->
        </div>
    </div>

    <!-- @COMPONENT: AttendanceModal (Hidden by default) -->
    <div id="attendanceModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex items-center justify-between">
                        <h3 class="text-xl font-semibold text-gray-900">Batch Processing Results</h3>
                        <button class="text-gray-400 hover:text-gray-600" data-event="click:closeModal">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>
                <div class="p-6 overflow-y-auto max-h-[70vh]">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Processing Summary -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-900 mb-3">Processing Summary</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Images Captured:</span>
                                    <span class="font-medium" data-bind="processing.imagesCaptured">20</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Faces Detected:</span>
                                    <span class="font-medium" data-bind="processing.facesDetected">142</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Students Recognized:</span>
                                    <span class="font-medium" data-bind="processing.studentsRecognized">28</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Average Confidence:</span>
                                    <span class="font-medium" data-bind="processing.avgConfidence">94.6%</span>
                                </div>
                            </div>
                        </div>

                        <!-- Student List -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-900 mb-3">Recognized Students</h4>
                            <div class="space-y-2 max-h-48 overflow-y-auto">
                                <!-- @MAP: recognizedStudents.map(student => ( -->
                                <div class="flex items-center justify-between py-2 border-b border-gray-200 last:border-b-0">
                                    <span class="text-gray-900" data-bind="student.name">John Smith</span>
                                    <span class="text-sm bg-secondary/10 text-secondary px-2 py-1 rounded" data-bind="student.confidence">96.2%</span>
                                </div>
                                <!-- @END_MAP )) -->
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 flex space-x-4">
                        <button class="flex-1 bg-primary text-white py-3 rounded-lg hover:bg-primary/90 transition-colors">
                            <i class="fas fa-save mr-2"></i>Save Attendance
                        </button>
                        <button class="flex-1 bg-secondary text-white py-3 rounded-lg hover:bg-secondary/90 transition-colors">
                            <i class="fas fa-download mr-2"></i>Export Report
                        </button>
                        <button class="px-6 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fas fa-edit mr-2"></i>Manual Correction
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: AttendanceModal -->

    <script>
        (function() {
            // TODO: Implement webcam capture functionality
            // TODO: Implement real-time face recognition
            // TODO: Implement batch processing workflow
            // TODO: Connect to Django REST API endpoints
            
            // Modal functionality
            function showModal(modalId) {
                document.getElementById(modalId).classList.remove('hidden');
            }
            
            function hideModal(modalId) {
                document.getElementById(modalId).classList.add('hidden');
            }
            
            // Simulate progress updates
            function updateProgress(current, total) {
                const percentage = (current / total) * 100;
                const progressBar = document.querySelector('[data-bind="progress.percentage"]');
                const progressText = document.querySelector('[data-bind="progress.current"]');
                
                if (progressBar) progressBar.style.width = percentage + '%';
                if (progressText) progressText.textContent = `${current}/${total}`;
            }
            
            // Camera control handlers
            document.addEventListener('click', function(e) {
                if (e.target.closest('[data-event="click:startCapture"]')) {
                    console.log('Starting attendance capture...');
                    // TODO: Initialize webcam and start capture sequence
                }
                
                if (e.target.closest('[data-event="click:stopCapture"]')) {
                    console.log('Stopping capture...');
                    // TODO: Stop capture and process results
                }
                
                if (e.target.closest('[data-event="click:closeModal"]')) {
                    hideModal('attendanceModal');
                }
            });
            
            // Simulate real-time updates (remove in production)
            setInterval(function() {
                const timestamp = new Date().toLocaleTimeString();
                // Update any real-time elements here
            }, 5000);
        })();
    </script>
</body>
</html>